angular.module("angular-sourcemaps",[]).factory("$exceptionHandler",["$log","$window","$injector",function(n,r,t){var e=function(n){var e=t.get("$q"),a=t.get("$http"),o=window.sourceMap.SourceMapConsumer,u={},c=function(n){if(u[n])return u[n];var r=a.get(n).then(function(r){var t=r.data.match(/\/\/# sourceMappingURL=(.+\.map)/);if(t){var u=n.match(/^(.+)\/[^/]+$/);return u=u&&u[1],a.get(u+"/"+t[1]).then(function(n){return new o(n.data)})}return e.reject()});return u[n]=r,r};return n.stack?e.all(_.map(n.stack.split(/\n/),function(n){var t=n.match(/^(.+)(http.+):(\d+):(\d+)/);if(t){var a=t[1],o=t[2],u=t[3],i=t[4];return c(o).then(function(n){var t=n.originalPositionFor({line:parseInt(u,10),column:parseInt(i,10)}),e=a.match(/\s*(at)?\s*(.*?)\s*(\(|@)/);return e=e&&e[2]||"","    at "+(t.name?t.name:e)+" "+r.location.origin+t.source+":"+t.line+":"+t.column},function(){return n})}return e.when(n)})).then(function(n){return n.join("\n")}):e.when("")};return function(r){if(r.stack){if(r.stack.indexOf("source-map.js")>-0||r.stack.indexOf("source-map.min.js")>-0)return}else console.error(r);e(r).then(n.error)}}]);
